Title: مروری بر معماری نرم‌افزاری و شرح مولفه‌ها
Date: 2014-08-13 14:33
Category: Architecture, Backend
img: http://blog.mirad.ir/img/whiteboard.jpg
Author: سینا محمودی

مطالبی که به سادگی با باز کردن صفحه اصلی برنامه برای شما نمایش داده می‌شود، روند طولانی را طی کرده تا به این مرحله می‌رسد. به طور کلی میراد به بکند[^backend] و فرانت‌اند[^frontend] ها تقسیم می‌شود که از جمله فرانت‌اند ها می‌توان به برنامه موبایل آی‌او‌اس[^ios] یا اندروید[^android] اشاره کرد. این فرانت‌اند ها اطلاعات مورد نیاز خود را از یک بکند مرکزی دریافت می‌کندد.

گرفتن یک مطلب از منبع اصلی و ثبت آن در پایگاه داده‌ی میراد توسط برنامه‌ای انجام می‌شود که به آن اصطلاحا فِچِر[^fetcher] می‌گوییم. فِچِر دو مسئولیت عمده بر عهده دارد، اول پیدا کردن مطالب جدید در منابعی که توسط میراد پشتیبانی می‌شوند. دوم گرفتن هرکدام و تجزیه کردن آن. تجزیه کردن شامل مراحل زیر می‌شود:

* گرفتن صفحه‌ی مطلب جدید و دریافت داده‌های مورد نیاز، از جمله: عنوان، متن، تاریخ ثبت، موضوع، برچسب‌ها، ... .
* یکی از مراحل حیاتی و در عین حال فوق‌العاده سنگین از نظر پردازشی، تشخیص دادن مطالب تکراری است. به خصوص در مورد خبر‌ها همچون رویداد‌های سیاسی، تکنولوژی و ورزشی که توسط منابع مختلف گزارش می‌شوند. مازاد بر این‌ها، در وب‌سایت‌های ایرانی شناخته شده و کمتر شناخته شده فرهنگ کپی کردن رایج است. از این رو بخشی از مطالب تکراری و یا فوق‌العاده مشابه هستند که نمایش همه‌ی آن‌ها به کاربر خستگی و زدگی ایجاد می‌کند.
* هر منبع دسته‌بندی خاص خود را دارد و از اسم‌های خاص خود برای موضوع‌ها استفاده می‌کند. برای برطرف کردن این مشکل، که باعث گیج شدن کاربر و پایین آمدن توانایی پیدا کردن مطالب می‌شود، توسط نگاشت یکسان سازی موضوعی انجام می‌شود و به هر مطلب موضوعی از لیست موضوع‌های میراد داده می‌شود.
* با توجه به کمبود وقت و حجم بالای اطلاعات، خواندن کل متن هر مطلب معمولا برای کاربر امری غیر‌ممکن است. بعضی از منابع خلاصه‌ای برای مطالب خود ارائه می‌کندد که در این صورت میراد از آن استفاده می‌کند. برای سایر منابع، الگوریتمی که وحید توسعه داده مهم‌ترین یخش‌های متن را تشخیص می‌دهد و خلاصه‌ای از آن می‌سازد.

همانطور که حتما می‌دانید، میراد فقط یک جمع‌آورنده‌ی خبر نیست و یک مزیت عمده آن نسبت به برنامه‌های دیگر قابلیت آن در شخصی سازی مطالب برای کاربر‌ها است. دو کاربر پس از مدتی کار کردن با میراد، در یک لحظه فید‌های مختلفی خواهند داشت. لیست مطالب فید هر کاربر بر اساس علاقه‌های وی آماده می‌شود و حتی اگر دو کاربر ذکر شده موضوع‌های یکسانی را به عنوان موضوع‌های مورد علاقه خود انتخاب کرده باشند، بر اساس فیدبک‌هایشان لیستی که برای هر‌یک انتخاب می‌شود متفاوت خواهد بود. ترتیب مطالب در فید به گونه‌ایست که کاربر بتواند با کمترین زحمت مهم‌ترین مطالب جدید مورد علاقه‌ی خود را بخواند.

مولفه‌ای که مسئولیت انجام کارهای ذکر شده در بالا را بر عهده دارد پرسونالایزر[^personalizer] نام دارد که در اصطلاح علمی یک نوع سیستم توصیه‌گر[^recsys] می‌باشد. پرسونالایزر به نوعی ارتباط بین مطالب گرفته شده توسط فِچِر را با کاربران برقرار می‌کند و مشخص می‌کند که از مطالب جدید گرفته شده، کدام‌ها و با چه ترتیبی به فید هر کاربر اضافه شوند. برای این که پرسونالایزر بتواند این کار را انجام دهد به هرچه بیشتر فیدبک از کاربر نیاز دارد و در تعداد پایین کاربر گویی گمانه‌زنی می‌کند، در تنیجه شخصی سازی را محدود به کاربر‌هایی کردیم که حداقل ۵ فیدبک در اختیار سیستم قرار داده‌اند. نحوه‌ی کار پرسونالایزر از محدوده‌ی این پست خارج است و توضیح آن به طولانی شدن پست می‌انجامد و به صورت جداگانه در بلاگ نوشته می‌شود.

پردازش‌های سنگین فِچِر و پرسونالایزر از مرز توانایی یک سرور خارج است و با افزایش تعداد کاربر‌ها و مطالب به تعداد بیشتری سرور برای انجام آن‌ها نیاز است. با افزایش تعداد سرور پیچیدگی‌های فنی هم افزایش می‌یابند و به راهکاری برای پخش کردن کار‌ها بین این سرور‌ها نیاز است. ما به عنوان راهکار از یک کارگزار پیام[^msgbroker] استفاده می‌کنیم تا بتوانیم همراه با تعداد کاربر‌ها رشد کنیم و پاسخگوی درخواست‌ها باشیم.

می‌دانیم که تمام مسائل و راهکارهایی که در طراحی اولیه لحاظ شده‌اند تنها نوک کوه یخ هستند و مسائل و چالش‌های جدیدی در این راه منتظر هستند. آماده‌ایم با این چالش‌ها رو‌در‌رو برخورد کنیم و از آن‌ها عبور کنیم. به ما اعتماد کنید.

[^backend]: Backend
[^frontend]: Frontend
[^ios]: iOS
[^android]: Android
[^fetcher]: Fetcher
[^personalizer]: Personalizer
[^recsys]: Recommender System
[^msgbroker]: Message Broker
